workspace:
   base: /go
   path: src/github.com/vaibhavk9/godrone
   
pipeline:
      
  build:
    image: golang
    secrets: [ git_user, git_pass ]
     
    commands:
      - printenv 
      - echo $GIT_USER && echo $GIT_PASS
      - cd /root && echo "machine github.com" >> .netrc && echo "login $GIT_USER" >> .netrc && echo "password $GIT_PASS" >> .netrc
      - cat .netrc
      - cd -
      - go get ./... 
      - cd /go/src/github.com && ls
         
                  
            
  gcr:
    image: plugins/docker
    registry: gcr.io
    repo: gcr.io/zang-api-sandbox/godrone
    privileged: true
    secrets: [ docker_username, docker_password ]
    debug: true

